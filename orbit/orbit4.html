<!DOCTYPE html>
<html lang="en">

<head>
    <title>Two-Body Orbital Dynamics: The General Case</title>
    <link rel="stylesheet" href="./orbit-shared.css">
    <!-- Load d3.js -->
    <script src="d3.v4.js"></script>
    <!-- LaTeX support -->
    <script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script defer src="./orbit4.js"></script>
</head>

<body id="orbit4-body">
    <canvas id="star-background"></canvas>

    <h1 id="title">Two-Body Orbital Dynamics: The General Case</h1>

    <p id="text">
        <i>This applet visualizes the motion of two bodies with comparable masses orbiting their common center of mass (barycenter). Unlike the previous example where one mass dominated, here we see how both objects move when they are similar masses, following elliptical paths around their shared center of mass.</i>
    </p>

    <p id="text">
        In the general two-body problem, both masses \(m_1\) and \(m_2\) orbit around their center of mass (barycenter). The center of mass is located at distances \(r_1\) and \(r_2\) from each mass respectively, where:
        \[
        r_1 = \frac{m_2}{m_1 + m_2} \cdot r \quad \text{and} \quad r_2 = \frac{m_1}{m_1 + m_2} \cdot r
        \]
        where \(r = r_2 - r_1\) is the separation distance between the two masses.
    </p>

    <p id="text">
        The separation distance of the reduced mass follows the same orbital equation as before:
        \[
        r(\theta) = \frac{L^2}{\mu G m_1 m_2} \frac{1}{1 + \epsilon \cos \theta}
        \]
    </p>

    <p id="text">
        However, the key difference is in how the individual masses move. Each mass follows its own elliptical orbit around the barycenter:
        <br>• The <span style="color: green;"><b>green mass</b></span> (\(m_1\)) orbits at distance \(r_1\) from the center of mass
        <br>• The <span style="color: blue;"><b>blue mass</b></span> (\(m_2\)) orbits at distance \(r_2\) from the center of mass
        <br>• The <span style="color: red;"><b>red point</b></span> shows the separation distance \(r\) between the masses
        <br>• The <span style="color: pink;"><b>pink point</b></span> marks the center of mass (barycenter)
    </p>

    <!-- Improved question/answer block -->
    <section class="question-block" id="question1-block">
        <div class="question-text">
            <strong>Question:</strong> How does the motion differ when \(m_1 \approx m_2\) compared to when \(m_1 >> m_2\)?
        </div>
        <button id="show-q1" class="toggle-answer">Show answer</button>
        <div id="answer1" class="answer-text" style="display: none;">
            When \(m_1 \approx m_2\), both masses orbit significantly around the barycenter, which lies approximately halfway between them. Each mass traces a substantial elliptical path. When \(m_1 >> m_2\), the barycenter is very close to \(m_1\), so \(m_1\) barely moves while \(m_2\) does most of the orbiting - this is the case we saw in the Sun-Earth system.
        </div>
    </section>

    <p id="text">
        This simulation uses masses that could represent systems like binary stars, double asteroids, or the Pluto-Charon system. Try adjusting the mass ratio and eccentricity \(\epsilon\) to see how both objects respond to changes in the orbital parameters.
    </p>

    <p id="text">
        Notice how the principle of least action still dictates the motion - both masses follow the paths that minimize the action integral. Look at how the position of the bodies relate to the position of the reduced mass. 
    </p>

    <div id="applet">
        <!-- Animation and sliders -->
        <div id="animation-container">
            <div id="orbit-animation"></div>
            <div id="slider-row">
                <div id="mass-ratio-slider-container">
                    <label for="mass-ratio-slider">Mass Ratio (m₁/m₂): </label>
                    <span id="print-mass-ratio">3.0</span><br>
                    <input id="mass-ratio-slider" class="slider" type="range" min="1" max="10" value="3" step="0.1">
                </div>
                <div id="epsilon-slider-container">
                    <label for="epsilon-slider">Eccentricity (ε): </label>
                    <span id="print-epsilon">0.00</span><br>
                    <input id="epsilon-slider" class="slider" type="range" min="0" max="0.99" value="0" step="0.01">
                </div>
            </div>
        </div>
        
        <!-- Component visibility controls -->
        <div class="control-section">
            <h3>Component Visibility</h3>
            <button id="toggle-mass1" class="toggle-button visible">Green Mass (m₁)</button>
            <button id="toggle-mass2" class="toggle-button visible">Blue Mass (m₂)</button>
            <button id="toggle-separation" class="toggle-button visible">Red Point (r)</button>
            <button id="toggle-com" class="toggle-button visible">Pink COM</button>
        </div>
        
        <!-- Mass information -->
        <div class="calculated-values">
            <h4>Mass Information:</h4>
            <p>\(m_1 =\) <span id="print-mass1">1.95e+28</span> kg</p>
            <p>\(m_2 =\) <span id="print-mass2">6.50e+27</span> kg</p>
        </div>
    </div>

    <div class="buttons">
        <column id="prev-button">
            <button onclick="window.location.href = 'orbit3.html'">PREVIOUS PAGE</button>
        </column>
        <column id="next-button">
            <button onclick="window.location.href = 'orbit5.html'">NEXT PAGE</button>
        </column>
    </div>
</body>

</html>

